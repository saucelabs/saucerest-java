# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

github:
  prebuilds:
    master: true
    branches: true
    pullRequests: true
    pullRequestsFromForks: true
    addCheck: true
    addBadge: true

tasks:
  - name: Install Java8
    init: |
      export sdkman_auto_answer=true
      sdk install java 8.0.345-tem
      sdk use java 8.0.345-tem
      gp sync-done java8install

  - name: Install Dependencies
    init: |
      gp sync-await java8install   # Wait for Java to be installed before building
      mvn dependency:resolve
      gp sync-done dependencies

  - name: Build Code 
    before: mvn clean
    init:  |
      gp sync-await dependencies   # Wait for Java to be installed before building
      mvn compile -DskipTests=true
    command: mvn test